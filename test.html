<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Caio Duque – Jornada 3D</title>
  <!-- Favicon -->
  <link rel="icon" href="assets/images/favicon.png" type="image/png" />

  <!-- Open Graph & Twitter Card (Mantidos) -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://caioduque.dev/">
  <meta property="og:title" content="Caio Duque • Portfólio Oficial">
  <meta property="og:description" content="Conheça meus projetos, habilidades e minha trajetória como desenvolvedor, designer e entusiasta de cibersegurança.">
  <meta property="og:image" content="https://caioduque.dev/assets/images/preview.png">
  <meta property="og:site_name" content="Caio Duque Portfólio">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:url" content="https://caioduque.dev/">
  <meta name="twitter:title" content="Caio Duque • Portfólio Oficial">
  <meta name="twitter:description" content="Conheça meus projetos, habilidades e minha trajetória como desenvolvedor, designer e entusiasta de cibersegurança.">
  <meta name="twitter:image" content="https://caioduque.dev/assets/images/preview.png">
  
  <!-- Tailwind via CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- Bibliotecas para a Jornada 3D -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <!-- Renderizadores 3D para HTML e Controles de Câmera -->
  <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/renderers/CSS3DRenderer.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
  <!-- GSAP para animações suaves da câmera -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/gsap.min.js"></script>

  <style>
    /* Reset e Configuração Base */
    html, body {
      width: 100%;
      height: 100%;
      margin: 0;
      padding: 0;
      overflow: hidden; /* A rolagem agora é controlada pela câmera 3D */
      background-color: #1a1a2e; /* Um fundo base mais escuro */
    }

    /* Contêineres para os renderizadores Three.js */
    #webgl-canvas-container, #css3d-renderer-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none; /* O renderer CSS captura os eventos */
    }

    #css3d-renderer-container {
      pointer-events: auto; /* Permite interação com o HTML */
    }

    #webgl-canvas {
      display: block;
      width: 100%;
      height: 100%;
    }
    
    /* Esconde as seções de conteúdo do fluxo normal da página. O Three.js irá posicioná-las. */
    .content-section {
        position: absolute;
        top: -9999px; /* Joga para fora da tela inicialmente */
        left: -9999px;
        width: 1000px; /* Largura fixa para os painéis 3D */
        max-width: 90vw;
        padding: 2rem;
        opacity: 0; /* Começa invisível para evitar flash de conteúdo */
        transition: opacity 0.5s;
    }

    /* Estilos herdados e adaptados do seu CSS original */
    .tooltip span {
      position: absolute;
      bottom: -1.75rem;
      left: 50%;
      transform: translateX(-50%);
      background-color: rgba(31, 41, 55, 0.9);
      color: #fff;
      padding: 0.25rem 0.5rem;
      font-size: 0.75rem;
      border-radius: 0.25rem;
      white-space: nowrap;
      opacity: 0;
      pointer-events: none;
      transition: opacity .2s ease;
      z-index: 10;
    }
    .tooltip:hover span {
      opacity: 1;
    }
    
    .dynamic-gradient {
      position: relative;
      display: inline-block;
      background-image: linear-gradient(90deg, #5A4BFF 0%, #7B46FF 50%, #8E5CFF 100%);
      background-size: 150% 150%;
      background-position: 0% 50%;
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      transition: background-position .4s ease;
    }

    .dynamic-gradient::after {
      content: attr(data-glow);
      position: absolute;
      inset: 0;
      z-index: -1;
      background: inherit;
      background-size: inherit;
      background-position: inherit;
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      filter: blur(6px) brightness(2);
      opacity: 0;
      transition: opacity .2s linear;
      pointer-events: none;
    }

    .dynamic-gradient.radial {
      background-image: conic-gradient(from var(--angle, 0deg) at var(--cx, 50%) var(--cy, 50%), #5A4BFF 0deg, #7B46FF 120deg, #8E5CFF 240deg, #5A4BFF 360deg);
      background-size: 150% 150%;
      transition: none;
    }
    .dynamic-gradient.radial::after { opacity: 1; }

    .card {
      position: relative;
      z-index: 2;
      backdrop-filter: blur(10px);
      background-color: rgba(44, 47, 51, .60);
      border: 1px solid rgba(114, 137, 218, .30);
      transition: transform .25s ease, background-color .25s ease, box-shadow .25s ease;
    }

    .card:hover {
      transform: scale(1.04);
      background-color: rgba(44, 47, 51, .25);
      box-shadow: 0 0 20px rgba(114, 137, 218, .35);
      z-index: 3;
    }

    /* Constelação de Habilidades */
    #skills-constellation-container {
        width: 100%;
        max-width: 900px;
        height: 600px;
        margin: 0 auto;
        position: relative;
        z-index: 5;
        background: transparent; /* O fundo agora é o 3D */
    }
    #skills-constellation-container svg { width: 100%; height: 100%; }
    .skill-link { stroke: rgba(114, 137, 218, 0.4); stroke-width: 1.5px; transition: stroke 0.3s ease; }
    .skill-node circle { stroke: #fff; stroke-width: 1.5px; transition: transform 0.3s ease, fill 0.3s ease; }
    .skill-node:hover circle { transform: scale(1.5); }
    .skill-node text { fill: #E0E0E0; font-size: 12px; font-weight: 500; pointer-events: none; text-anchor: middle; dominant-baseline: middle; }
    .skill-node.focused circle, .skill-node:hover circle { stroke: #5A4BFF; stroke-width: 3px; }
    .skill-link.focused { stroke: #8E5CFF; stroke-width: 2.5px; }
    .faded { opacity: 0.2; }
    .skill-node circle.glass { fill: rgba(44,47,51,.45); backdrop-filter: blur(6px); stroke: rgba(255,255,255,.35); stroke-width: 1px; transition: filter .3s ease, stroke .3s ease, transform .3s ease; }
    .skill-node:hover circle.glass { stroke: rgba(128,160,255,.90); filter: drop-shadow(0 0 8px rgba(114,137,218,.6)); transform: scale(1.25); }
    .skill-node image { pointer-events:none; clip-path: circle(50%); }
    .skill-info-card{ position:fixed; max-width:240px; padding:1rem 1.25rem; border-radius:1rem; backdrop-filter:blur(12px); background:rgba(44,47,51,.55); border:1px solid rgba(114,137,218,.35); box-shadow:0 0 20px rgba(114,137,218,.25); color:#F9FAFB; opacity:0; pointer-events:none; transition:opacity .25s ease, transform .25s ease; z-index:50; }
    .skill-info-card.visible{ opacity:1; }
    .skill-info-card h4{ font-size:1rem; font-weight:700; margin-bottom:.35rem; }
    .skill-info-card p{ font-size:.875rem; line-height:1.35rem; }
    @media (max-width:768px){ .skill-info-card.mobile{ width:calc(100% - 3rem); max-width:none; left:50%!important; top:50%!important; transform:translate(-50%,-50%) scale(.95); } }
    .skill-node.core-star:hover image { filter: drop-shadow(0 0 8px rgba(114,137,218,.7)) brightness(1.2); transform: scale(1.15); transition: filter .3s ease, transform .3s ease; }
    
    /* Header e Navegação */
    header {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        z-index: 100; /* Acima de tudo */
        background: rgba(28, 28, 40, 0.25);
        backdrop-filter: blur(10px);
        border-bottom: 1px solid rgba(114, 137, 218, 0.2);
    }

    /* Botões, Badges e outros elementos de UI (mantidos) */
    .btn{ position:relative;overflow:hidden;display:inline-flex; align-items:center;justify-content:center;gap:.45rem; padding:.25rem 1.25rem; font-size:.875rem;font-weight:600; color:#fff;text-shadow:0 0 6px #000; border-radius:.5rem; background-image:linear-gradient(180deg,#000 0%,#101010 100%); border:1px solid rgba(255,255,255,.15); backdrop-filter:blur(6px); box-shadow:0 0 10px rgba(0,0,0,.35); transition:background .4s ease,color .4s ease; cursor: pointer; }
    .btn:hover{ background-image:linear-gradient(135deg,#fff 0%,#e8e1ff 40%,#a68bff 100%); color:#000;text-shadow:none; }
    .badge{ display:inline-flex;align-items:center;gap:0.25rem; padding:0.25rem 0.75rem; font-size:0.875rem;font-weight:500; color:#fff; border-radius:0.5rem; backdrop-filter:blur(8px); border:1px solid rgba(255,255,255,.20); box-shadow:0 0 8px rgba(0,0,0,.25); }
    .badge-owner{ background-image:linear-gradient(135deg,#5c64f4,#2c2e72);}
    .badge-mod { background-image:linear-gradient(135deg,#7069c5,#35325b);}
    .badge-affil{ background-image:linear-gradient(135deg,#83e2bd,#4a7c69);}
    .noselect, h1, h2, h3, h4, .badge, .skill-node text { -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; }
  </style>
</head>
<body class="bg-gray-900 text-gray-100 font-sans">

  <!-- Contêineres para os renderizadores -->
  <div id="webgl-canvas-container">
    <canvas id="webgl-canvas"></canvas>
  </div>
  <div id="css3d-renderer-container"></div>

  <!-- HEADER / NAVEGAÇÃO (permanece fixo na tela) -->
  <header>
    <div class="container mx-auto px-4 py-4 flex justify-between items-center flex-wrap">
      <h1 class="text-2xl md:text-4xl font-extrabold text-white">Caio Duque</h1>
      <nav>
        <ul class="flex space-x-2 md:space-x-6 font-semibold">
          <li><a href="#home" class="hover:text-indigo-200 transition text-sm md:text-base">Início</a></li>
          <li><a href="#about" class="hover:text-indigo-200 transition text-sm md:text-base">Sobre</a></li>
          <li><a href="#skills" class="hover:text-indigo-200 transition text-sm md:text-base">Habilidades</a></li>
          <li><a href="#projects" class="hover:text-indigo-200 transition text-sm md:text-base">Projetos</a></li>
          <li><a href="#contacts" class="hover:text-indigo-200 transition text-sm md:text-base">Contatos</a></li>
        </ul>
      </nav>
      <a href="/kali" id="cybersecurityModeBtn" class="btn hidden md:inline-flex">
        <img src="assets/images/kali.png" onerror="this.src='https://placehold.co/24x24/000/FFF?text=K';" alt="Kali Icon" class="w-6 h-6 mr-2" />
        Modo Cybersecurity
      </a>
    </div>
  </header>

  <!-- SEÇÕES DE CONTEÚDO (serão transformadas em painéis 3D) -->
  <div id="content-wrapper">

    <!-- HOME / INÍCIO -->
    <section id="home" class="content-section">
      <div class="card rounded-xl shadow-xl p-8 flex flex-col md:flex-row items-center">
        <div class="flex flex-col items-center md:items-start md:flex-row">
          <img src="assets/images/perfil.png" loading="lazy" alt="Foto de Perfil" class="w-40 h-40 rounded-full ring-4 ring-indigo-500" />
          <div class="md:ml-6 text-center md:text-left mt-4 md:mt-0 max-w-xl">
            <h2 id="nome" class="dynamic-gradient text-3xl font-bold drop-shadow-lg tracking-tight" data-glow="Caio Duque">Caio Duque</h2>
            <p class="mt-2 text-gray-300">Estudante de Ciência da Computação apaixonado por programação, design e cibersegurança. Atualmente, sou Data Analyst na Federação Paranaense do Automobilismo.</p>
          </div>
        </div>
        <div class="mt-6 md:mt-0 md:ml-auto flex space-x-2 flex-wrap justify-center md:justify-end">
          <div class="tooltip relative group mb-2 md:mb-0"><img src="assets/images/galaxy_badge.png" alt="Designer" loading="lazy" class="w-12 h-12 transition-transform duration-200 group-hover:scale-110" /><span>Designer</span></div>
          <div class="tooltip relative group mb-2 md:mb-0"><img src="assets/images/old_duques_badge.png" loading="lazy" alt="Dono do Old Duque's" class="w-12 h-12 transition-transform duration-200 group-hover:scale-110" /><span>Dono do Old Duque's</span></div>
          <div class="tooltip relative group mb-2 md:mb-0"><img src="assets/images/languages_badge.png" loading="lazy" alt="Fluente em Idiomas" class="w-12 h-12 transition-transform duration-200 group-hover:scale-110" /><span>Fluente em Idiomas</span></div>
          <div class="tooltip relative group mb-2 md:mb-0"><img src="assets/images/developer_badge.png" loading="lazy" alt="Full-stack Dev" class="w-12 h-12 transition-transform duration-200 group-hover:scale-110" /><span>Full‑stack Dev</span></div>
          <div class="tooltip relative group mb-2 md:mb-0"><img src="assets/images/researcher_badge.png" loading="lazy" alt="Pesquisador" class="w-12 h-12 transition-transform duration-200 group-hover:scale-110" /><span>Pesquisador</span></div>
        </div>
      </div>
    </section>

    <!-- SOBRE MIM -->
    <section id="about" class="content-section">
      <h3 class="text-center text-3xl font-bold text-indigo-400 mb-8">Sobre Mim</h3>
      <div class="card rounded-xl p-8 max-w-3xl mx-auto text-center">
        <p class="text-gray-300 text-lg mb-4">Olá! Eu sou o Caio Duque, um entusiasta da tecnologia com uma paixão inesgotável por desvendar os segredos da programação e do design. Atualmente, estou imerso nos estudos de Ciência da Computação, buscando não apenas conhecimento, mas a capacidade de criar soluções inovadoras que impactem positivamente o mundo.</p>
        <p class="text-gray-300 text-lg mb-4">Minha jornada inclui experiências significativas como Moderador no servidor Viggle, onde aprimorei minhas habilidades de comunicação e gestão de comunidades, e como criador do "Old Duque's", um espaço dedicado ao compartilhamento de conhecimento em diversas áreas tech.</p>
        <div class="mt-8"><a href="assets/CaioDuque_CV.pdf" download class="btn">Baixar CV</a></div>
      </div>
    </section>

    <!-- HABILIDADES -->
    <section id="skills" class="content-section">
        <h3 class="text-center text-3xl font-bold text-indigo-400 mb-4">Constelação de Habilidades</h3>
        <p class="text-center text-gray-400 mb-8">Arraste os nós, explore as conexões e passe o mouse para ver detalhes.</p>
        <div id="skills-constellation-container">
            <!-- O SVG para o grafo D3 será inserido aqui pelo JavaScript -->
        </div>
    </section>

    <!-- PROJETOS -->
    <section id="projects" class="content-section">
        <h3 class="text-center text-3xl font-bold text-indigo-400 mb-8">Projetos em Destaque</h3>
        <div class="grid md:grid-cols-2 gap-8">
          <div class="card rounded-xl p-6 flex flex-col items-center">
            <img src="assets/images/learnconnect_logo.png" loading="lazy" alt="LearnConnect Logo" class="w-24 h-24 object-contain rounded-lg mb-4" />
            <h4 class="text-xl font-semibold mb-2">LearnConnect</h4>
            <p class="text-gray-300 text-center mb-4">Plataforma de aprendizado colaborativo que integra servidor Discord e website Next.js.</p>
            <a href="http://168.75.74.153:3001/" target="_blank" class="btn">Visitar Site</a>
          </div>
          <div class="card rounded-xl p-6 flex flex-col items-center">
            <img src="assets/images/amadeusAI.png" loading="lazy" alt="Amadeus AI Logo" class="w-24 h-24 object-contain rounded-lg mb-4" />
            <h4 class="text-xl font-semibold mb-2">Amadeus AI</h4>
            <p class="text-gray-300 text-center mb-4">Solução inovadora para atendimento especial no projeto LearnConnect e Old Duque’s via Discord Bot e API.</p>
            <a href="https://github.com/cai0duque/Discord-Bot-IA" target="_blank" class="btn">Acessar repositório</a>
          </div>
        </div>
    </section>

    <!-- CONTATOS -->
    <section id="contacts" class="content-section">
        <h3 class="text-center text-3xl font-bold text-indigo-400 mb-8">Contatos</h3>
        <div class="card rounded-xl p-8 max-w-lg mx-auto">
            <div class="flex flex-col md:flex-row justify-center items-center space-y-6 md:space-y-0 md:space-x-10">
                <a href="mailto:contact@caioduque.dev" class="flex items-center space-x-2 hover:text-indigo-400 transition text-lg"><svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" /></svg><span>Email</span></a>
                <a href="https://github.com/cai0duque" target="_blank" class="flex items-center space-x-2 hover:text-indigo-400 transition text-lg"><svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" viewBox="0 0 24 24" fill="currentColor"><path d="M12 0a12 12 0 00-3.8 23.4c.6.1.8-.3.8-.6v-2.3c-3.3.7-4-1.6-4-1.6-.6-1.3-1.5-1.7-1.5-1.7-1.2-.8.1-.8.1-.8 1.3.1 2 .9 2 .9 1.2 2 3.1 1.4 3.9 1 0-.9.5-1.4.9-1.7-2.7-.3-5.5-1.3-5.5-6a4.7 4.7 0 011.2-3.2 4.3 4.3 0 01.1-3.2s1-.3 3.3 1.2a11.5 11.5 0 016 0c2.3-1.5 3.3-1.2 3.3-1.2.5 1.2.5 2.3.1 3.2a4.7 4.7 0 011.2 3.2c0 4.7-2.8 5.7-5.5 6 .4.3.8 1 .8 2v3c0 .3.2.7.8.6A12 12 0 0012 0z"/></svg><span>GitHub</span></a>
                <a href="https://linkedin.com/in/cai0duque" target="_blank" class="flex items-center space-x-2 hover:text-indigo-400 transition text-lg"><svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.762 2.239 5 5 5h14c2.761 0 5-2.238 5-5v-14c0-2.761-2.239-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.784-1.75-1.749s.784-1.75 1.75-1.75c.965 0 1.749.785 1.749 1.75 0 .965-.784 1.749-1.749 1.749zm13.5 12.268h-3v-5.5c0-1.378-.026-3.152-1.918-3.152-1.918 0-2.212 1.5-2.212 3.053v5.599h-3v-11h2.879v1.507h.041c.401-.76 1.382-1.562 2.848-1.562 3.048 0 3.611 2.008 3.611 4.62v6.435z"/></svg><span>LinkedIn</span></a>
            </div>
        </div>
    </section>

  </div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      // --- SETUP DA CENA 3D ---
      let camera, scene, renderer;
      let cssScene, cssRenderer;
      let controls;
      let particles;
      const objects = [];
      const targets = {};

      init();
      animate();

      function init() {
        // Câmera
        camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 1, 5000);
        camera.position.z = 2000;

        // Cena WebGL (para partículas)
        scene = new THREE.Scene();

        // Cena CSS3D (para conteúdo HTML)
        cssScene = new THREE.Scene();

        // Partículas (código adaptado do seu original)
        const particlesCount = 500;
        const positions = new Float32Array(particlesCount * 3);
        for (let i = 0; i < particlesCount; i++) {
          positions[i * 3 + 0] = (Math.random() - 0.5) * 4000;
          positions[i * 3 + 1] = (Math.random() - 0.5) * 4000;
          positions[i * 3 + 2] = (Math.random() - 0.5) * 4000;
        }
        const particlesGeometry = new THREE.BufferGeometry();
        particlesGeometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));
        const particlesMaterial = new THREE.PointsMaterial({
          color: 0x99AAB5, size: 5, blending: THREE.AdditiveBlending, transparent: true, sizeAttenuation: true
        });
        particles = new THREE.Points(particlesGeometry, particlesMaterial);
        scene.add(particles);

        // --- CONVERTER CONTEÚDO HTML PARA OBJETOS 3D ---
        const contentElements = document.querySelectorAll('.content-section');
        contentElements.forEach((element, i) => {
            // Tornar o elemento visível para o renderer
            element.style.opacity = '1';

            const object = new THREE.CSS3DObject(element);
            object.position.x = Math.random() * 4000 - 2000;
            object.position.y = Math.random() * 4000 - 2000;
            object.position.z = Math.random() * 4000 - 2000;
            cssScene.add(object);
            objects.push(object);

            // Definir a posição final (alvo) para cada painel
            const theta = i * 0.5 + Math.PI; // Espalha em um arco
            const y = 0;

            const targetObject = new THREE.Object3D();
            targetObject.position.setFromCylindricalCoords(1200, theta, y);
            
            // Apontar o painel para o centro da cena
            targetObject.lookAt(new THREE.Vector3(0,0,0));

            targets[element.id] = targetObject;
        });

        // Renderer WebGL
        const webglContainer = document.getElementById('webgl-canvas-container');
        const canvas = document.getElementById('webgl-canvas');
        renderer = new THREE.WebGLRenderer({ canvas: canvas, antialias: true, alpha: true });
        renderer.setPixelRatio(window.devicePixelRatio);
        renderer.setSize(window.innerWidth, window.innerHeight);
        webglContainer.appendChild(renderer.domElement);

        // Renderer CSS3D
        const cssContainer = document.getElementById('css3d-renderer-container');
        cssRenderer = new THREE.CSS3DRenderer();
        cssRenderer.setSize(window.innerWidth, window.innerHeight);
        cssContainer.appendChild(cssRenderer.domElement);
        
        // Controles de órbita (permite arrastar para olhar ao redor)
        controls = new THREE.OrbitControls(camera, cssRenderer.domElement);
        controls.enableZoom = false; // Desativa o zoom com scroll
        controls.enablePan = false; // Desativa o pan com o botão direito
        controls.minPolarAngle = Math.PI / 2.2; // Restringe o movimento vertical
        controls.maxPolarAngle = Math.PI / 1.8;

        // --- NAVEGAÇÃO ---
        const navLinks = document.querySelectorAll('header nav a');
        navLinks.forEach(link => {
            link.addEventListener('click', function(event) {
                event.preventDefault();
                const targetId = this.getAttribute('href').substring(1);
                transform(targets[targetId], 2000);
            });
        });
        
        // Inicia na posição "home"
        transform(targets.home, 2000);
      }

      function transform(target, duration) {
        // Anima a posição do objeto container
        objects.forEach((object, i) => {
            const targetPosition = target.position.clone();
            const targetRotation = target.rotation.clone();

            // Anima cada painel para a mesma posição e rotação do alvo
            // Isso faz com que o painel selecionado venha para a frente
            const isTargetObject = object.element.id === Object.keys(targets).find(key => targets[key] === target);

            // Move o painel alvo para a frente da câmera
            const finalPosition = isTargetObject ? new THREE.Vector3(0, 0, 800) : targetPosition.clone().multiplyScalar(2);
            const finalRotation = isTargetObject ? new THREE.Euler(0,0,0) : targetRotation;

            // Anima a câmera para olhar para o ponto 0,0,0
            gsap.to(camera.position, {
                duration: duration / 1000,
                x: target.position.x * 1.5,
                y: target.position.y * 1.5,
                z: target.position.z * 1.5 + 800, // Fica um pouco atrás do painel
                ease: 'power3.inOut',
                onUpdate: () => camera.lookAt(controls.target)
            });

            gsap.to(controls.target, {
                duration: duration / 1000,
                x: 0,
                y: 0,
                z: 0,
                ease: 'power3.inOut'
            });

            // Anima os painéis
            gsap.to(object.position, {
                duration: duration / 1000,
                x: finalPosition.x,
                y: finalPosition.y,
                z: finalPosition.z,
                ease: 'power3.inOut'
            });

            gsap.to(object.rotation, {
                duration: duration / 1000,
                x: finalRotation.x,
                y: finalRotation.y,
                z: finalRotation.z,
                ease: 'power3.inOut'
            });
        });
      }

      function onWindowResize() {
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(window.innerWidth, window.innerHeight);
        cssRenderer.setSize(window.innerWidth, window.innerHeight);
      }

      function animate() {
        requestAnimationFrame(animate);
        particles.rotation.x += 0.0005;
        particles.rotation.y += 0.0005;
        controls.update();
        renderer.render(scene, camera);
        cssRenderer.render(cssScene, camera);
      }

      window.addEventListener('resize', onWindowResize);

      // --- LÓGICA DA CONSTELAÇÃO DE HABILIDADES (D3.JS) ---
      // (Seu código D3.js original, com pequenas adaptações para o novo contexto)
      (() => {
        const container = document.getElementById('skills-constellation-container');
        if (!container) return;

        const skillsData = {
          nodes: [
            { id: "Programação", group: "core" }, { id: "Python", group: "language" }, { id: "JavaScript", group: "language" }, { id: "Java", group: "language" }, { id: "Front-End", group: "core" }, { id: "React", group: "framework" }, { id: "Next.js", group: "framework" }, { id: "Tailwind CSS", group: "framework" }, { id: "D3.js", group: "library" }, { id: "Three.js", group: "library" }, { id: "Back-End", group: "core" }, { id: "SQL", group: "database" }, { id: "Ferramentas", group: "core" }, { id: "Git", group: "tool" }, { id: "Design", group: "core" }, { id: "Figma", group: "tool" }, { id: "UI/UX", group: "design" }, { id: "Segurança", group: "core" }, { id: "Cybersecurity", group: "security" },
          ],
          links: [
            { source: "Programação", target: "Python" }, { source: "Programação", target: "JavaScript" }, { source: "Programação", target: "Java" }, { source: "Front-End", target: "JavaScript" }, { source: "Front-End", target: "React" }, { source: "Front-End", target: "Next.js" }, { source: "Front-End", target: "Tailwind CSS" }, { source: "React", target: "JavaScript" }, { source: "Next.js", target: "React" }, { source: "D3.js", target: "JavaScript" }, { source: "Three.js", target: "JavaScript" }, { source: "Back-End", target: "Python" }, { source: "Back-End", target: "Java" }, { source: "Back-End", target: "SQL" }, { source: "Ferramentas", target: "Git" }, { source: "Ferramentas", target: "Figma" }, { source: "Design", target: "Figma" }, { source: "Design", target: "UI/UX" }, { source: "Front-End", target: "UI/UX" }, { source: "Segurança", target: "Cybersecurity" }, { source: "Programação", target: "Cybersecurity" }
          ]
        };
        const skillDescriptions = { "Python": `Comecei a estudar Python aos 14 anos enquanto mergulhava em cybersecurity. A linguagem acabou virando minha porta de entrada para automação e para os bots de Discord que já construí.`, "JavaScript": `Gosto de pensar no JavaScript como meu “canivete suíço”, do front-end à lógica de servidores, ele me permite transformar ideias em interfaces vivas.`, "Java": `É a linguagem que me deu disciplina de engenharia de software. Comecei a estudar na UniFil, dentro do curso de Ciência da Computação. Usei Java em projetos acadêmicos de POO e em APIs simples para a Federação de Automobilismo.`, "React": `React foi a base do LearnConnect. Curto o fluxo de dados previsível que ele traz para UIs complexas.`, "Next.js": `Server Side Rendering no LearnConnect veio com Next.js, garantindo SEO e páginas super rápidas.`, "Tailwind CSS": `Meu framework favorito para estilização. Posso prototipar interfaces em minutos sem sair do HTML.`, "D3.js": `Ferramenta essencial para criar as visualizações interativas de dados de corridas da FPrA, inclusive esta constelação.`, "Three.js": `Exploro 3D na web por hobby, foi com Three.js que criei o background de partículas deste portfólio.`, "SQL": `Nada como um bom SELECT para descobrir padrões nos resultados das pistas. Uso SQL todos os dias como data-analyst.`, "Git": `Tudo o que eu faço no mundo dev é feito com versionamento, sempre busco manter um bom padrão de comunicação e informação nos commits`, "Figma": `Faço do Figma meu caderno de rascunhos digitais antes de qualquer linha de código. Literalmente a minha paixão mais forte no mundo dev é a arte do design gráfico. Desde pequeno, sempre amei criar.`, "UI/UX": `Acredito que código bonito é inútil se a experiência desaponta. Por isso estudo fluxos, acessibilidade e micro-interações.`, "Cybersecurity": `CTFs, labs e muita curiosidade: segurança é meu combustível para aprender como as coisas realmente funcionam.`, "Programação": "O centro de tudo que faço.", "Front-End": "Onde criatividade vira interface.", "Back-End": "A engrenagem por trás da mágica.", "Ferramentas": "Utilitários que aceleram meu dia a dia.", "Design": "Transformando ideias em valor visual.", "Segurança": "Camada crítica para qualquer projeto." };
        const skillIcons = { "Python": "assets/images/python.png", "JavaScript": "assets/images/javascript.png", "Java": "assets/images/java.png", "React": "assets/images/react.png", "Next.js": "assets/images/nextjs.png", "Tailwind CSS": "assets/images/tailwindcss.png", "D3.js": "assets/images/d3.png", "Three.js": "assets/images/threejs.png", "SQL": "assets/images/sql.png", "Git": "assets/images/git.png", "Figma": "assets/images/figma.png", "UI/UX": "assets/images/uiux_design.png", "Cybersecurity": "assets/images/cybersecurity.png", };

        const width = container.clientWidth;
        const height = container.clientHeight;
        const isMobile = window.innerWidth <= 768;
        const SCALE = isMobile ? 0.65 : 1;
        const linkDist = isMobile ? 70 : 100;
        const chargeStrength = isMobile ? -120 : -200;

        const infoCard = document.createElement("div");
        infoCard.className = "skill-info-card";
        document.body.appendChild(infoCard);

        const svg = d3.select(container).append("svg").attr("viewBox", [-width / 2, -height / 2, width, height]);

        const simulation = d3.forceSimulation(skillsData.nodes).force("link", d3.forceLink(skillsData.links).id(d => d.id).distance(linkDist)).force("charge", d3.forceManyBody().strength(chargeStrength)).force("center", d3.forceCenter()).force("collide", d3.forceCollide().radius(d => (d.group === "core" ? 26 : 20) * SCALE + 6).iterations(2));
        if (isMobile) simulation.alpha(0.6);

        const link = svg.append("g").attr("class", "links").selectAll("line").data(skillsData.links).enter().append("line").attr("class", "skill-link");
        const node = svg.append("g").attr("class", "nodes").selectAll("g").data(skillsData.nodes).enter().append("g").attr("class", "skill-node");

        node.each(function (d) { const g = d3.select(this); if (d.group === "core") { const starSize = 52 * SCALE; g.classed("core-star", true).append("image").attr("href", "assets/images/star.png").attr("width", starSize).attr("height", starSize).attr("x", -starSize / 2).attr("y", -starSize / 2); } else { const r = 20 * SCALE; const imgSize = 32 * SCALE; g.append("circle").attr("class", "glass").attr("r", r); if (skillIcons[d.id]) { g.append("image").attr("href", skillIcons[d.id]).attr("width", imgSize).attr("height", imgSize).attr("x", -imgSize / 2).attr("y", -imgSize / 2); } } });
        node.append("text").text(d => d.id).attr("y", d => (d.group === "core" ? 34 * SCALE : 28 * SCALE)).attr("font-size", isMobile ? 9 : 11);
        node.call(d3.drag().on("start", dragstarted).on("drag", dragged).on("end", dragended));

        function showCard(d, evt){ const desc = skillDescriptions[d.id] || "Em construção…"; infoCard.innerHTML = `<h4>${d.id}</h4><p>${desc}</p>`; if (isMobile){ infoCard.classList.add("mobile"); }else{ infoCard.classList.remove("mobile"); moveCard(evt); } requestAnimationFrame(()=>infoCard.classList.add("visible")); }
        function moveCard(evt){ const pad = 12; let x = evt.clientX + 18; let y = evt.clientY + 18; if (x + infoCard.offsetWidth > window.innerWidth - pad) x = evt.clientX - infoCard.offsetWidth - 18; if (y + infoCard.offsetHeight > window.innerHeight - pad) y = evt.clientY - infoCard.offsetHeight - 18; infoCard.style.left = x + "px"; infoCard.style.top = y + "px"; }
        function hideCard(){ infoCard.classList.remove("visible","mobile"); }
        node.on("mouseenter", (evt,d)=> showCard(d,evt)).on("mousemove", (evt)=>{ if (!isMobile) moveCard(evt); }).on("mouseleave", hideCard).on("touchstart", (evt,d)=>{ evt.preventDefault(); showCard(d, evt.touches[0]); window.addEventListener("touchend", hideCard, { once:true }); });

        simulation.on("tick", () => { link.attr("x1", d => d.source.x).attr("y1", d => d.source.y).attr("x2", d => d.target.x).attr("y2", d => d.target.y); const margin = 40 * SCALE; node.each(d => { d.x = Math.max(-width/2 + margin, Math.min(width/2 - margin, d.x)); d.y = Math.max(-height/2 + margin, Math.min(height/2 - margin, d.y)); }).attr("transform", d => `translate(${d.x},${d.y})`); });
        function dragstarted(event, d) { if (!event.active) simulation.alphaTarget(0.3).restart(); d.fx = d.x; d.fy = d.y; }
        function dragged(event, d) { d.fx = event.x; d.fy = event.y; }
        function dragended(event, d) { if (!event.active) simulation.alphaTarget(0); d.fx = null; d.fy = null; }
      })();
    });
  </script>

</body>
</html>
