<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Caio Duque – Portfólio</title>
  <!-- Favicon -->
  <link rel="icon" href="assets/images/favicon.png" type="image/png" />

  <!-- Open Graph (Discord, Facebook, etc) -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://caioduque.dev/">
  <meta property="og:title" content="Caio Duque • Portfólio Oficial">
  <meta property="og:description" content="Conheça meus projetos, habilidades e minha trajetória como desenvolvedor, designer e entusiasta de cibersegurança.">
  <meta property="og:image" content="https://caioduque.dev/assets/images/preview.png">
  <meta property="og:site_name" content="Caio Duque Portfólio">

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:url" content="https://caioduque.dev/">
  <meta name="twitter:title" content="Caio Duque • Portfólio Oficial">
  <meta name="twitter:description" content="Conheça meus projetos, habilidades e minha trajetória como desenvolvedor, designer e entusiasta de cibersegurança.">
  <meta name="twitter:image" content="https://caioduque.dev/assets/images/preview.png">
  <!-- Tailwind via CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Bibliotecas para a nova versão -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  <script src="https://d3js.org/d3.v7.min.js"></script>

  <style>
    /* Estilos Gerais e Antigos (mantidos para consistência) */
    .tooltip span {
      position: absolute;
      bottom: -1.75rem;
      left: 50%;
      transform: translateX(-50%);
      background-color: rgba(31, 41, 55, 0.9);
      color: #fff;
      padding: 0.25rem 0.5rem;
      font-size: 0.75rem;
      border-radius: 0.25rem;
      white-space: nowrap;
      opacity: 0;
      pointer-events: none;
      transition: opacity .2s ease;
      z-index: 10;
    }
    .tooltip:hover span {
      opacity: 1;
    }
    
body.has-fixed-header{
  padding-top: 4rem;
}
    .dynamic-gradient {
      position: relative;
      display: inline-block;
      background-image: linear-gradient(90deg, #5A4BFF 0%, #7B46FF 50%, #8E5CFF 100%);
      background-size: 150% 150%;
      background-position: 0% 50%;
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      transition: background-position .4s ease;
    }

    .dynamic-gradient::after {
      content: attr(data-glow);
      position: absolute;
      inset: 0;
      z-index: -1;
      background: inherit;
      background-size: inherit;
      background-position: inherit;
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      filter: blur(6px) brightness(2);
      opacity: 0;
      transition: opacity .2s linear;
      pointer-events: none;
    }

    .dynamic-gradient.radial {
      background-image: conic-gradient(
        from var(--angle, 0deg)
        at var(--cx, 50%) var(--cy, 50%),
        #5A4BFF 0deg, #7B46FF 120deg, #8E5CFF 240deg, #5A4BFF 360deg
      );
      background-size: 150% 150%;
      transition: none;
    }
    .dynamic-gradient.radial::after { opacity: 1; }

    .card {
      position: relative;
      z-index: 2;
      backdrop-filter: blur(10px);
      background-color: rgba(44, 47, 51, .60);
      border: 1px solid rgba(114, 137, 218, .30);
      transition:
        transform .25s ease,
        background-color .25s ease,
        box-shadow .25s ease;
    }

    .card:hover {
      transform: scale(1.04);
      background-color: rgba(44, 47, 51, .25);
      box-shadow: 0 0 20px rgba(114, 137, 218, .35);
      z-index: 3;
    }

    canvas#bg-canvas { /* ID alterado para evitar conflitos */
      display: block;
      position: fixed;
      inset: 0;
      width: 100vw;
      height: 100vh;
      z-index: -1;
      pointer-events: none;
    }

    body {
      overflow-x: hidden;
      overflow-y: auto;
      scroll-behavior: smooth;
    }

    /* ---- NOVOS ESTILOS para Constelação de Habilidades (D3.js) ---- */
    #skills-constellation-container {
        width: 100%;
        max-width: 900px;
        height: 600px; /* Altura fixa para a visualização */
        margin: 0 auto;
        position: relative;
        z-index: 5;
    }

    #skills-constellation-container svg {
        width: 100%;
        height: 100%;
    }

    .skill-link {
        stroke: rgba(114, 137, 218, 0.4);
        stroke-width: 1.5px;
        transition: stroke 0.3s ease;
    }

    .skill-node circle {
        stroke: #fff;
        stroke-width: 1.5px;
        transition: transform 0.3s ease, fill 0.3s ease;
    }
    .skill-node:hover circle {
        transform: scale(1.5);
    }

    .skill-node text {
        fill: #E0E0E0;
        font-size: 12px;
        font-weight: 500;
        pointer-events: none;
        text-anchor: middle;
        dominant-baseline: middle;
    }

    /* Estilos para estado focado/hover */
    .skill-node.focused circle, .skill-node:hover circle {
        stroke: #5A4BFF;
        stroke-width: 3px;
    }
    .skill-link.focused {
        stroke: #8E5CFF;
        stroke-width: 2.5px;
    }
    /* Estilos para elementos não focados */
    .faded {
        opacity: 0.2;
    }

    /* --- nós com glassmorphism --- */
.skill-node circle.glass {
  fill: rgba(44,47,51,.45);             /* vidro escuro */
  backdrop-filter: blur(6px);
  stroke: rgba(255,255,255,.35);
  stroke-width: 1px;
  transition: filter .3s ease, stroke .3s ease, transform .3s ease;
}
.skill-node:hover circle.glass {
  stroke: rgba(128,160,255,.90);        /* brilho azulado */
  filter: drop-shadow(0 0 8px rgba(114,137,218,.6));
  transform: scale(1.25);
}
/* imagem interna mantém-se redonda */
.skill-node image {
  pointer-events:none;                  /* não intercepta o mouse */
  clip-path: circle(50%);
}
    /* ─────── Cartão-descrição que surge sobre o nó ─────── */
.skill-info-card{
  position:fixed;                 /* fora do fluxo; fácil de mover */
  max-width:240px;
  padding:1rem 1.25rem;
  border-radius:1rem;
  backdrop-filter:blur(12px);
  background:rgba(44,47,51,.55);
  border:1px solid rgba(114,137,218,.35);
  box-shadow:0 0 20px rgba(114,137,218,.25);
  color:#F9FAFB;
  opacity:0;                      /* invisível por padrão */
  pointer-events:none;            /* não “rouba” o mouse */
  transition:opacity .25s ease, transform .25s ease;
  z-index:50;
}
.skill-info-card.visible{         /* classe que mostramos via JS */
  opacity:1;
}

/* Texto interno */
.skill-info-card h4{
  font-size:1rem;
  font-weight:700;
  margin-bottom:.35rem;
}
.skill-info-card p{
  font-size:.875rem;
  line-height:1.35rem;
}

/* No mobile ocupamos a largura quase toda e centralizamos */
@media (max-width:768px){
  .skill-info-card.mobile{
    width:calc(100% - 3rem);
    max-width:none;
    left:50%!important;           /* forçado pelo JS */
    top:50%!important;
    transform:translate(-50%,-50%) scale(.95);
  }
}


    /* estrela adota um leve glow ao passar o mouse */
.skill-node.core-star:hover image {
  filter: drop-shadow(0 0 8px rgba(114,137,218,.7))
          brightness(1.2);
  transform: scale(1.15);
  transition: filter .3s ease, transform .3s ease;
}
/* ---------- fundo "nebula.png" + fade radial ---------- */
.skills-bg{
  position:absolute;
  inset:0;
  background:url('assets/images/nebula.png') center / cover no-repeat;
  opacity:.4;                         /* 90 % no ponto mais forte      */
  z-index:0;                          /* atrás das nuvens, à frente da página */
  pointer-events:none;

  /* máscara: invisível nas bordas, 90 % no centro            */
  mask-image: radial-gradient(circle at center,
                rgba(0,0,0,1) 0%,
                rgba(0,0,0,.4) 15%,
                rgba(0,0,0,0) 40%);
  -webkit-mask-image: radial-gradient(circle at center,
                rgba(0,0,0,1) 0%,
                rgba(0,0,0,.4) 15%,
                rgba(0,0,0,0) 40%);
}

/* ---------- nuvens roxo-azul quase imperceptíveis ---------- */
.skills-clouds{
  position:absolute;
  inset:-15%;                    /* transborda um pouco para não aparecer borda */
  z-index:1;                      /* acima da nebulosa, abaixo do SVG            */
  pointer-events:none;
  filter:blur(60px) saturate(160%);
  opacity:.25;                   /* MUITO sutil                                  */

  /* três manchas grandes em degradês radiais */
  background:
    radial-gradient(circle at 30% 40%, rgba(115,0,255,.8) 0%, transparent 60%),
    radial-gradient(circle at 75% 65%, rgba(0,120,255,.7) 0%, transparent 55%),
    radial-gradient(circle at 50% 85%, rgba(140,60,255,.6) 0%, transparent 65%);
}



    /* -- Mantendo outros estilos -- */
    .icon-svg { width: 24px; height: 24px; fill: currentColor; }
    .carousel-container { position: relative; overflow: hidden; margin: 0 auto; max-width: 960px; padding: 0 2rem; }
    .carousel-track { display: flex; align-items: center; transition: transform 0.5s ease-in-out; }
    .server-card { flex-shrink: 0; width: 380px; max-width: 90%; margin: 0 1rem; opacity: 0; transform: scale(0.7); pointer-events: none; transition: transform 0.5s ease-in-out, opacity 0.5s ease-in-out, box-shadow 0.5s ease; }
    .server-card.is-center { opacity: 1; transform: scale(1); box-shadow: 0 0 30px rgba(114, 137, 218, .5); pointer-events: auto; }
    .server-card.is-left, .server-card.is-right { opacity: 0.3; transform: scale(0.7); pointer-events: auto; }
    .carousel-arrow { position: absolute; top: 50%; transform: translateY(-50%); background-color: rgba(114, 137, 218, 0.4); color: white; padding: 0.75rem 0.5rem; border-radius: 9999px; cursor: pointer; z-index: 10; opacity: 0.7; transition: background-color 0.3s ease, opacity 0.3s ease; display: flex; align-items: center; justify-content: center; width: 40px; height: 40px; }
    .carousel-arrow:hover { background-color: rgba(114, 137, 218, 0.8); opacity: 1; }
    .carousel-arrow.left { left: 0; }
    .carousel-arrow.right { right: 0; }
/* ---------- BADGES PERSONALIZADAS --------------------------------- */
.badge{                       /* base comum a todas                 */
  display:inline-flex;align-items:center;gap:0.25rem;
  padding:0.25rem 0.75rem;            /* px-3 py-1 equivalente        */
  font-size:0.875rem;font-weight:500; /* text-sm                      */
  color:#fff;                           /* texto branco                */
  border-radius:0.5rem;                 /* ↙ menos arredondado          */
  backdrop-filter:blur(8px);            /* efeito‑vidro                */
  border:1px solid rgba(255,255,255,.20);
  box-shadow:0 0 8px rgba(0,0,0,.25);
}

.badge-owner{        background-image:linear-gradient(135deg,#5c64f4,#2c2e72);}
.badge-mod  {        background-image:linear-gradient(135deg,#7069c5,#35325b);}
.badge-affil{        background-image:linear-gradient(135deg,#83e2bd,#4a7c69);}
.badge-manager{      background-image:linear-gradient(135deg,#b30735,#a05a5a);}    

/* ---------- BOTÕES “UNIVERSE” ------------------------------------ */
.btn{                                 /* base padrão                 */
  position:relative;overflow:hidden;display:inline-flex;
  align-items:center;justify-content:center;gap:.45rem;
  padding:.25rem 1.25rem;             /* mesma altura das badges     */
  font-size:.875rem;font-weight:600;
  color:#fff;text-shadow:0 0 6px #000;
  border-radius:.5rem;                /* ↙ mais retangular           */
  background-image:linear-gradient(180deg,#000 0%,#101010 100%);
  border:1px solid rgba(255,255,255,.15);
  backdrop-filter:blur(6px);
  box-shadow:0 0 10px rgba(0,0,0,.35);
  transition:background .4s ease,color .4s ease;
}

/* camada de partículas – fica por baixo do texto */
.btn::before{
  content:"";pointer-events:none;position:absolute;inset:0;
  background-image:
     radial-gradient(#fff 0 1px,transparent 1px 4px),
     radial-gradient(#fff 0 1px,transparent 1px 4px),
     radial-gradient(#fff 0 1px,transparent 1px 4px),
     radial-gradient(#fff 0 1px,transparent 1px 4px);
  background-size:90px 90px,140px 140px, 60px 60px, 180px 180px;   /* densidades diferentes */
  background-position:0 0,60px 30px, 30px 15px, 45px 20px;
  opacity:.45; animation:moveStars 25s linear infinite;
}

/* animação lenta do “céu estrelado” */
@keyframes moveStars{
  from{background-position:0 0,60px 30px;}
  to  {background-position:-600px 300px,-300px 150px;}
}

/* HOVER – cores invertidas, partículas somem e recebem 1 impulso   */
.btn:hover{
  background-image:linear-gradient(135deg,#fff 0%,#e8e1ff 40%,#a68bff 100%);
  color:#000;text-shadow:none;
}
.btn:hover::before{
  opacity:0;animation-duration:6s;        /* impulso rápido           */
}


    #cybersecurityModeBtn { background-color: #000; color: #fff; border: 1px solid #000; transition: all 0.3s ease; box-shadow: 0 0 0 rgba(139, 92, 246, 0); }
    #cybersecurityModeBtn:hover { background-color: #fff; color: #000; border-color: #000; box-shadow: 0 0 20px rgba(139, 92, 246, 0.5); }
    #cybersecurityModeBtn:hover img { filter: invert(1); }

    html, body { width: 100%; overflow-x: hidden; box-sizing: border-box; }
    *, *::before, *::after { box-sizing: inherit }

    .fade-mask { -webkit-mask-image: linear-gradient(to bottom, black 0%, transparent 100%); mask-image: linear-gradient(to bottom, black 0%, transparent 100%); }

/* Responsividade */
@media (max-width:768px){

  /* ----------- header geral ----------- */
  header .container{
    flex-wrap:wrap;
    gap:0.5rem 1rem;
  }

  header h1{
    font-size:1.75rem;
    flex:1 0 100%;
    text-align:center;
  }

  #cybersecurityModeBtn{
    order:3;                        /* fica na linha de baixo */
    width:100%;
    justify-self:stretch;
  }

  /* ----------- navegação em 2 colunas ----------- */
header nav ul{
  display:grid;                               /* grid > flex        */
  grid-template-columns:repeat(3,auto);       /* 3 colunas iguais   */
  justify-content:center;                     /* bloco centralizado */
  column-gap:1.25rem;                         /* espaço lateral     */
  row-gap:.65rem;                             /* espaço vertical    */
}

header nav li{ 
  margin:0!important;
  text-align:center;
}

header nav a{
  white-space:nowrap;
  font-size:.875rem;
}
  
header nav a[aria-current="page"]{
  color:#c7d2fe; /* text-indigo-300 */
  position:relative;
  text-shadow:0 0 4px #5c64f4, 0 0 8px #5c64f4;
}

header nav a[aria-current="page"]::after{
  content:"";
  position:absolute; left:0; right:0; bottom:-6px; height:2px;
  background:linear-gradient(90deg,#5c64f4,#a78bfa);
  box-shadow:0 0 8px rgba(124,58,237,.6), 0 0 12px rgba(124,58,237,.5);
  border-radius:9999px;
}

  /* ----------- ajustes já existentes ----------- */
  .server-card{ width:280px; margin:0 0.5rem; }
  .carousel-arrow{ width:30px; height:30px; padding:0.5rem 0.25rem; }
  #skills-constellation-container{ height:450px; }
}

/* corte extra p/ telas < 640 px (mantido) */
@media (max-width:640px){
  .server-card{ width:90%; }
  #skills-constellation-container{ height:400px; }
}


    /* navbar desliza para cima suavemente; o "voltar" é instantâneo         */
header.nav-hidden{
  transform: translateY(-110%);   /* empurra totalmente para fora       */
  transition: transform .35s ease;/* só existe quando a classe está ativa*/
}

/* Scroll personalizado estilo vidro */
::-webkit-scrollbar {
  width: 12px;
}

::-webkit-scrollbar-track {
  background: rgba(44, 47, 51, 0.2);  /* vidro escuro */
  backdrop-filter: blur(8px);
  border-left: 1px solid rgba(255, 255, 255, 0.05);
}

::-webkit-scrollbar-thumb {
  background: rgba(200, 200, 255, 0.25);  /* thumb claro translúcido */
  backdrop-filter: blur(4px);
  border-radius: 6px;
  border: 2px solid rgba(255, 255, 255, 0.1);  /* leve contorno */
  transition: background 0.3s ease;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(114, 137, 218, 0.5);  /* destaque ao passar o mouse */
}


footer {
  backdrop-filter: blur(10px);
  background: rgba(28, 28, 40, 0.25); /* vidro escuro translúcido */
  border-top: 1px solid rgba(114, 137, 218, 0.2);
  box-shadow: 0 0 20px rgba(114, 137, 218, 0.15);
}

footer p {
  color: #8ab4ff; /* azul-claro neon */
  text-shadow:
    0 0 4px #5c64f4,
    0 0 8px #5c64f4,
    0 0 12px #5c64f4;
  transition: color 0.3s ease, text-shadow 0.3s ease;
  font-weight: 500;
}
/* === Disable text selection (cross‑browser) ======================= */
.noselect,                                     /* reusable utility   */
h1, h2, h3, h4,                                /* section titles     */
.badge,                                        /* Discord role tags  */
.skill-node text {                             /* labels in the SVG  */
  -webkit-user-select: none; /* Safari / older Chromium */
  -moz-user-select: none;    /* Firefox                */
  -ms-user-select: none;     /* old Edge / IE          */
  user-select: none;         /* modern browsers        */
}

    /* —— Tipografia global —— */
html { hanging-punctuation: first allow-end; }
p, li { hyphens: auto; }
.text-balance { text-wrap: balance; }   /* fallback caso Tailwind não inclua */
.text-pretty  { text-wrap: pretty;  }   /* idem */

/* “prose” minimalista (sem plugin) para blocos textuais */
.prose-like :where(h1,h2,h3){line-height:1.2;margin:0 0 .6em}
.prose-like :where(p){line-height:1.75;margin:.85em 0;color:#e5e7eb}
.prose-like :where(ul){list-style:disc;padding-left:1.25rem;margin:.75em 0}
.prose-like :where(ol){list-style:decimal;padding-left:1.25rem;margin:.75em 0}
.prose-like :where(blockquote){
  margin:1rem 0;padding:.75rem 1rem;border-left:3px solid #7B46FF;
  background:rgba(44,47,51,.45);border-radius:.5rem;color:#e5e7eb
}
.prose-like :where(code){font-family:ui-monospace, SFMono-Regular, Menlo, monospace;
  background:rgba(148,163,184,.15);padding:.15rem .4rem;border-radius:.35rem}
.prose-like :where(a){color:#8ab4ff;text-underline-offset:3px}
.prose-like :where(hr){border:none;height:1px;background:linear-gradient(90deg,transparent,#5c64f4,transparent);margin:1.25rem 0}


  </style>
</head>
<body class="bg-gray-900 text-gray-100 font-sans">

    <script>
    if (location.pathname.endsWith('/index.html')) {
      history.replaceState(null,'',location.pathname.replace('/index.html','/'));
    }
      document.body.classList.add('has-fixed-header');
    </script>
  <!-- O canvas agora será controlado pelo three.js -->
  <canvas id="bg-canvas"></canvas>

  <!-- NAVBAR -->
  <!-- header fixo + vidro ultra-transparente -->
<header
  class="
    fixed top-0 left-0 w-full z-50
    bg-[#2c2f33]/15           /* cinza-escuro 15 % (quase invisível)   */
    backdrop-blur-md          /* aplica o efeito glassmorphism         */
    border-b border-white/10  /* linha sutil na base (opcional)        */
    shadow-md shadow-black/20 /* leve sombra para leitura em claros    */
    transition-colors
    will-change-transform
  ">
    <div class="container mx-auto px-4 py-4 grid grid-cols-[auto_1fr_auto] items-center">
      <h1 class="text-4xl font-extrabold text-white">Caio Duque</h1>
      <nav class="justify-self-center">
        <ul class="flex space-x-6 font-semibold">
          <li><a aria-current="page" href="/" class="hover:text-indigo-200 transition">Início</a></li>
          <li><a href="https://github.com/cai0duque" target="_blank" rel="noopener noreferrer" class="hover:text-indigo-200 transition">GitHub</a></li>
          <li><a href="#contatos" class="hover:text-indigo-200 transition">Contatos</a></li>
          <li><a href="#learnconnect" class="hover:text-indigo-200 transition">Projetos</a></li>
          <li><a href="/journey" class="hover:text-indigo-200 transition">Jornada</a></li>
        </ul>
      </nav>
      <a href="/kali" id="cybersecurityModeBtn" class="btn justify-self-end">
        <img src="assets/images/kali.png" onerror="this.src='https://placehold.co/24x24/000/FFF?text=K';" alt="Kali Icon" class="w-6 h-6 mr-2 transition-filter duration-300" />
        Modo Cybersecurity
      </a>
    </div>
  </header>

  <!-- HERO / BANNER -->
  <section id="home" class="relative">
    <img src="assets/images/banner.png" loading="lazy" alt="Banner" class="fade-mask w-full h-[300px] object-cover object-center" />
    <div id="profileCard" class="container mx-auto px-4"> 
      <div class="card rounded-xl shadow-xl -mt-24 p-8 flex flex-col md:flex-row items-center">
        <div class="flex flex-col items-center md:items-start md:flex-row">
          <img src="assets/images/perfil2.png" loading="lazy" alt="Foto de Perfil" class="w-40 h-40 rounded-full ring-4 ring-indigo-500" />
          <div class="md:ml-6 text-center md:text-left mt-4 md:mt-0 max-w-xl">
            <h2 id="nome"
                class="dynamic-gradient text-3xl font-bold drop-shadow-lg tracking-tight"
                data-glow="Caio Duque">
              Caio Duque
            </h2>
            <p class="mt-2 text-gray-200/90 leading-relaxed md:text-lg text-pretty text-balance max-w-prose">Estudante de Ciência da Computação apaixonado por programação, design e cibersegurança. 
            Atualmente, sou Data Analyst na Federação Paranaense do Automobilismo e Estagiário na Hanke Digital Solutions.</p>
          </div>
        </div>
        <div class="mt-6 md:mt-0 md:ml-auto flex space-x-2 flex-wrap justify-center md:justify-end">
            <div class="tooltip relative group mb-2 md:mb-0">
                <img src="assets/images/galaxy_badge.png" alt="Designer" loading="lazy" class="w-12 h-12 transition-transform duration-200 group-hover:scale-110" />
                <span>Designer</span>
            </div>
            <div class="tooltip relative group mb-2 md:mb-0">
                <img src="assets/images/old_duques_badge.png" loading="lazy" alt="Dono do Old Duque's" class="w-12 h-12 transition-transform duration-200 group-hover:scale-110" />
                <span>Dono do Old Duque's</span>
            </div>
            <div class="tooltip relative group mb-2 md:mb-0">
                <img src="assets/images/languages_badge.png" loading="lazy" alt="Fluente em Idiomas" class="w-12 h-12 transition-transform duration-200 group-hover:scale-110" />
                <span>Fluente em Idiomas</span>
            </div>
            <div class="tooltip relative group mb-2 md:mb-0">
                <img src="assets/images/developer_badge.png" loading="lazy" alt="Full-stack Dev" class="w-12 h-12 transition-transform duration-200 group-hover:scale-110" />
                <span>Full‑stack Dev</span>
            </div>
            <div class="tooltip relative group mb-2 md:mb-0">
                <img src="assets/images/researcher_badge.png" loading="lazy" alt="Pesquisador" class="w-12 h-12 transition-transform duration-200 group-hover:scale-110" />
                <span>Pesquisador</span>
            </div>
        </div>
      </div>
    </div>
  </section>

  <!-- SOBRE MIM -->
  <section id="about" class="container mx-auto px-4 py-16">
    <h3 class="text-center text-3xl font-bold text-indigo-400 mb-8">Sobre Mim</h3>
    <div class="card rounded-xl p-8 max-w-3xl mx-auto text-center prose-like">
      <p class="mb-4 text-pretty text-balance">Olá! Eu sou o Caio Duque, um entusiasta da tecnologia com uma paixão inesgotável por desvendar os segredos da programação e do design. Atualmente, estou imerso nos estudos de Ciência da Computação, buscando não apenas conhecimento, mas a capacidade de criar soluções inovadoras que impactem positivamente o mundo.</p>
      <p class="mb-4 text-pretty text-balance">Minha jornada inclui experiências significativas como Moderador no servidor Viggle, onde aprimorei minhas habilidades de comunicação e gestão de comunidades, e como criador do "Old Duque's", um espaço dedicado ao compartilhamento de conhecimento em diversas áreas tech.</p>
      <p class="mb-2 text-pretty text-balance">Sou movido pela curiosidade, sempre em busca de novos desafios em cibersegurança e no desenvolvimento full-stack. Acredito que a tecnologia é uma ferramenta poderosa para a transformação, e estou sempre pronto para colaborar em projetos que busquem fazer a diferença.</p>
      <blockquote>“Tecnologia é uma ferramenta para transformar — estética, ética e impacto.”</blockquote>
      <div class="mt-8">
        <a href="assets/CaioDuque_CV.pdf" download class="btn">
            Baixar CV
        </a>
      </div>
    </div>
  </section>

  <!-- HABILIDADES (NOVA VERSÃO COM D3.JS) -->
  <section id="skills" class="container mx-auto px-4 py-16">
    <h3 class="text-center text-3xl font-bold text-indigo-400 mb-12">Constelação de Habilidades</h3>
    <div id="skills-constellation-container">
        <div class="skills-bg" aria-hidden="true"></div>

        <!--  CAMADA 1 → “nuvens” roxo-azul bem sutis      -->
        <div class="skills-clouds" aria-hidden="true"></div>
        <!-- O SVG para o grafo D3 será inserido aqui pelo JavaScript -->
    </div>
  </section>

  <!-- PROJETOS -->
  <section id="learnconnect" class="container mx-auto px-4 py-16">
    <h3 class="text-center text-3xl font-bold text-indigo-400 mb-8">Projetos em Destaque</h3>
    <div class="grid md:grid-cols-2 gap-8">
      <div class="card rounded-xl p-6 flex flex-col items-center hover:shadow-indigo-600/30 transition">
        <img src="assets/images/learnconnect_logo.png" loading="lazy" alt="LearnConnect Logo" class="w-24 h-24 object-contain rounded-lg mb-4" />
        <h4 class="text-xl font-semibold mb-2">LearnConnect</h4>
        <p class="text-gray-200/90 text-center mb-4 leading-relaxed text-pretty max-w-prose">Plataforma de aprendizado colaborativo que integra servidor Discord e website Next.js, oferecendo material e networking em tecnologia.</p>
        <a href="http://168.75.74.153:3001/" target="_blank" class="btn">Visitar Site</a>
      </div>
      <div class="card rounded-xl p-6 flex flex-col items-center hover:shadow-indigo-600/30 transition">
        <img src="assets/images/amadeusAI.png" loading="lazy" alt="Amadeus AI Logo" class="w-24 h-24 object-contain rounded-lg mb-4" />
        <h4 class="text-xl font-semibold mb-2">Amadeus AI</h4>
        <p class="text-gray-200/90 text-center mb-4 leading-relaxed text-pretty max-w-prose">
          Amadeus é uma solução inovadora para atendimento especial no projeto LearnConnect e Old Duque’s. Uma IA avançada que funciona via Discord Bot e API.
        </p>
        <a href="https://github.com/cai0duque/Discord-Bot-IA" target="_blank" class="btn">
          Acessar repositório
        </a>
      </div>
    </div>
  </section>

  <!-- SERVIDORES DISCORD (CAROUSEL) -->
  <section class="py-16">
    <div class="container mx-auto px-4 py-12">
      <h3 class="text-center text-3xl font-bold text-indigo-400 mb-8">Jornada no Discord</h3>
      <div class="carousel-container">
        <div class="carousel-track" id="serverCarouselTrack">
          <!-- VIGGLE -->
          <div class="server-card card rounded-xl p-6 flex flex-col items-center hover:shadow-indigo-600/30 transition">
            <div class="flex items-center mb-4">
              <img src="assets/images/viggle_logo.png" loading="lazy" alt="Viggle Logo" class="w-20 h-20 rounded-full object-cover" />
              <div class="ml-4 text-left">
                <h4 class="text-xl font-semibold flex items-center">Viggle <img src="assets/images/verified_server.png" loading="lazy" alt="Verificado" class="w-5 h-5 ml-1" /></h4>
                <p class="text-sm text-gray-400 flex items-center"><img src="assets/images/number_members.png" loading="lazy" alt="Membros" class="w-4 h-4 mr-1" /> 4.300.000+</p>
              </div>
            </div>
            <p class="mt-4 text-gray-200/90 flex-1 text-center leading-relaxed text-pretty max-w-prose mx-auto">Servidor oficial da IA Viggle, líder mundial em mixagem de animações e vídeos gerados por IA.</p>
            <div class="mt-6 flex items-center w-full justify-between">
              <span class="badge badge-mod"><img src="assets/images/moderator_role.png" alt="Ex‑Moderador" class="w-4 h-4"> Moderador</span>
              <button onclick="window.open('https://discord.gg/viggle','_blank')" class="btn">Entrar</button>
            </div>
          </div>
          <!-- OLD DUQUE’S -->
          <div class="server-card card rounded-xl p-6 flex flex-col items-center hover:shadow-indigo-600/30 transition">
            <div class="flex items-center mb-4">
              <img src="assets/images/old_duques_logo.png" loading="lazy" alt="Old Duque's Logo" class="w-20 h-20 rounded-full object-cover" />
              <div class="ml-4 text-left">
                <h4 class="text-xl font-semibold flex items-center">Old Duque's <img src="assets/images/server_booster_badge.png" loading="lazy" alt="Booster" class="w-5 h-5 ml-1" /></h4>
                <p class="text-sm text-gray-400 flex items-center"><img src="assets/images/number_members.png" loading="lazy" alt="Membros" class="w-4 h-4 mr-1" /> 220</p>
              </div>
            </div>
            <p class="mt-4 text-gray-200/90 flex-1 text-center leading-relaxed text-pretty max-w-prose mx-auto">Clã Old Duque's: central de materiais e conteúdos de qualidade sobre programação, design, cybersec, e mais.</p>
            <div class="mt-6 flex items-center w-full justify-between">
              <span class="badge badge-owner"><img src="assets/images/emperor.png" alt="Proprietário" class="w-4 h-4"> Proprietário</span>
              <button onclick="window.open('https://discord.gg/bwHGH75Txb','_blank')" class="btn">Entrar</button>
            </div>
          </div>
          <!-- FORMULA 1 -->
          <div class="server-card card rounded-xl p-6 flex flex-col items-center hover:shadow-indigo-600/30 transition">
            <div class="flex items-center mb-4">
              <img src="assets/images/f1.png" loading="lazy" alt="Formula 1 Logo" class="w-20 h-20 rounded-full object-cover" onerror="this.src='https://placehold.co/80x80/E10600/FFFFFF?text=F1';" />
              <div class="ml-4 text-left">
                <h4 class="text-xl font-semibold flex items-center">Formula One <img src="assets/images/partner.png" loading="lazy" alt="Partner" class="w-5 h-5 ml-1" onerror="this.src='https://placehold.co/20x20/F05F40/FFFFFF?text=P';" /></h4>
                <p class="text-sm text-gray-400 flex items-center"><img src="assets/images/number_members.png" loading="lazy" alt="Membros" class="w-4 h-4 mr-1" /> 100.000+</p>
              </div>
            </div>
            <p class="mt-4 text-gray-200/90 flex-1 text-center leading-relaxed text-pretty max-w-prose mx-auto">Servidor original de Fórmula 1 no Discord - junte-se para discutir o melhor esporte do mundo e conhecer outros fãs!</p>
            <div class="mt-6 flex items-center w-full justify-between">
              <span class="badge badge-affil"><img src="assets/images/motorsport.png" alt="Motorsport Affiliated" class="w-4 h-4"> Afiliado</span>
              <button onclick="window.open('https://discord.gg/f1','_blank')" class="btn">Entrar</button>
            </div>
          </div>
          <!-- SERVIDOR DO GOULARTE -->
<div class="server-card card rounded-xl p-6 flex flex-col items-center hover:shadow-indigo-600/30 transition">
  <div class="flex items-center mb-4">
    <img src="assets/images/goularte_logo.png" loading="lazy"
         alt="Goularte Logo" class="w-20 h-20 rounded-full object-cover"
         onerror="this.src='https://placehold.co/80x80/5865F2/FFFFFF?text=G';" />
    <div class="ml-4 text-left">
      <h4 class="text-xl font-semibold flex items-center">
        Servidor do Goularte
        <img src="assets/images/verified_server.png" alt="Verificado"
             class="w-5 h-5 ml-1" />
      </h4>
      <p class="text-sm text-gray-400 flex items-center">
        <img src="assets/images/number_members.png" alt="Membros"
             class="w-4 h-4 mr-1" /> 500.000+
      </p>
    </div>
  </div>
  <p class="mt-4 text-gray-200/90 flex-1 text-center leading-relaxed text-pretty max-w-prose mx-auto">
    Comunidade oficial do youtuber & streamer Goularte. Desativado em 2024. Aqui, participei da equipe de Moderação em 2021.
  </p>
  <div class="mt-6 flex items-center w-full justify-between">
    <span class="badge badge-mod">
      <img src="assets/images/moderator_role.png" alt="Moderador" class="w-4 h-4">
      Moderador
    </span>
    <button onclick="window.open('https://discord.gg/gou','_blank')" class="btn">Entrar</button>
  </div>
</div>

<!-- SERVIDOR DO SAN -->
<div class="server-card card rounded-xl p-6 flex flex-col items-center hover:shadow-indigo-600/30 transition">
  <div class="flex items-center mb-4">
    <img src="assets/images/san_logo.png" loading="lazy"
         alt="Servidor do San Logo" class="w-20 h-20 rounded-full object-cover"
         onerror="this.src='https://placehold.co/80x80/6A44F8/FFFFFF?text=S';" />
    <div class="ml-4 text-left">
      <h4 class="text-xl font-semibold flex items-center">
        Servidor do San
        <img src="assets/images/verified_server.png" alt="Verificado"
             class="w-5 h-5 ml-1" />
      </h4>
      <p class="text-sm text-gray-400 flex items-center">
        <img src="assets/images/number_members.png" alt="Membros"
             class="w-4 h-4 mr-1" /> 70.000+
      </p>
    </div>
  </div>
  <p class="mt-4 text-gray-200/90 flex-1 text-center leading-relaxed text-pretty max-w-prose mx-auto">
    Servidor oficial do Youtuber Tio San. Desativado em 2022. Permaneci na Gerência de Comunidade por um longo período.
  </p>
  <div class="mt-6 flex items-center w-full justify-between">
    <span class="badge badge-manager">
      <img src="assets/images/manager_role2.png" alt="Gerente" class="w-4 h-4"
           onerror="this.src='https://placehold.co/16x16/FFC86A/000?text=G';">
      Gerente
    </span>
    <button onclick="window.open('https://discord.gg/desativado_','_blank')" class="btn">Entrar</button>
  </div>
</div>

<!-- STEVEZTV -->
<div class="server-card card rounded-xl p-6 flex flex-col items-center hover:shadow-indigo-600/30 transition">
  <div class="flex items-center mb-4">
    <img src="assets/images/steveztv_logo.png" loading="lazy"
         alt="StevezTV Logo" class="w-20 h-20 rounded-full object-cover"
         onerror="this.src='https://placehold.co/80x80/5CF4B1/000?text=ST';" />
    <div class="ml-4 text-left">
      <h4 class="text-xl font-semibold flex items-center">
        StevezTV
        <img src="assets/images/server_booster_badge.png" alt="Booster"
             class="w-5 h-5 ml-1" />
      </h4>
      <p class="text-sm text-gray-400 flex items-center">
        <img src="assets/images/number_members.png" alt="Membros"
             class="w-4 h-4 mr-1" /> 45.000+
      </p>
    </div>
  </div>
  <p class="mt-4 text-gray-200/90 flex-1 text-center leading-relaxed text-pretty max-w-prose mx-auto">
    Comunidade oficial do Youtuber e TikToker StevezTV! Participei da equipe de moderação em 2022. 
  </p>
  <div class="mt-6 flex items-center w-full justify-between">
    <span class="badge badge-mod">
      <img src="assets/images/moderator_role.png" alt="Moderador" class="w-4 h-4">
      Moderador
    </span>
    <button onclick="window.open('https://discord.gg/2PBaeutwDc','_blank')" class="btn">Entrar</button>
  </div>
</div>

<!-- ITS A TRAP -->
<div class="server-card card rounded-xl p-6 flex flex-col items-center hover:shadow-indigo-600/30 transition">
  <div class="flex items-center mb-4">
    <img src="assets/images/itsatrap_logo.png" loading="lazy"
         alt="Its a Trap Logo" class="w-20 h-20 rounded-full object-cover"
         onerror="this.src='https://placehold.co/80x80/F85C5C/FFFFFF?text=IT';" />
    <div class="ml-4 text-left">
      <h4 class="text-xl font-semibold flex items-center">
        Its a Trap
        <img src="assets/images/verified_server.png" alt="Verificado"
             class="w-5 h-5 ml-1" />
      </h4>
      <p class="text-sm text-gray-400 flex items-center">
        <img src="assets/images/number_members.png" alt="Membros"
             class="w-4 h-4 mr-1" /> 200.000+
      </p>
    </div>
  </div>
  <p class="mt-4 text-gray-200/90 flex-1 text-center leading-relaxed text-pretty max-w-prose mx-auto">
    Maior servidor brasileiro de Roblox no Discord. Fui Gerente por recomendação, em 2024. Divirta-se!
  </p>
  <div class="mt-6 flex items-center w-full justify-between">
    <span class="badge badge-manager">
      <img src="assets/images/manager_role2.png" alt="Gerente" class="w-4 h-4"
           onerror="this.src='https://placehold.co/16x16/FFC86A/000?text=G';">
      Gerente
    </span>
    <button onclick="window.open('https://discord.gg/itsatrap','_blank')" class="btn">Entrar</button>
  </div>
</div>

        </div>
        <button class="carousel-arrow left" id="carouselPrev"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" /></svg></button>
        <button class="carousel-arrow right" id="carouselNext"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" /></svg></button>
      </div>
    </div>
  </section>

  <!-- CONTATOS -->
  <section id="contatos" class="container mx-auto px-4 py-16">
    <h3 class="text-center text-3xl font-bold text-indigo-400 mb-8">Contatos</h3>
    <div class="flex flex-col md:flex-row justify-center items-center space-y-6 md:space-y-0 md:space-x-10">
      <a href="mailto:contact@caioduque.dev" class="flex items-center space-x-2 hover:text-indigo-400 transition">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" /></svg>
        <span>Email</span>
      </a>
      <a href="https://github.com/cai0duque" target="_blank" class="flex items-center space-x-2 hover:text-indigo-400 transition">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" viewBox="0 0 24 24" fill="currentColor"><path fill-rule="evenodd" d="M12 0a12 12 0 00-3.8 23.4c.6.1.8-.3.8-.6v-2.3c-3.3.7-4-1.6-4-1.6-.6-1.3-1.5-1.7-1.5-1.7-1.2-.8.1-.8.1-.8 1.3.1 2 .9 2 .9 1.2 2 3.1 1.4 3.9 1 0-.9.5-1.4.9-1.7-2.7-.3-5.5-1.3-5.5-6a4.7 4.7 0 011.2-3.2 4.3 4.3 0 01.1-3.2s1-.3 3.3 1.2a11.5 11.5 0 016 0c2.3-1.5 3.3-1.2 3.3-1.2.5 1.2.5 2.3.1 3.2a4.7 4.7 0 011.2 3.2c0 4.7-2.8 5.7-5.5 6 .4.3.8 1 .8 2v3c0 .3.2.7.8.6A12 12 0 0012 0z" clip-rule="evenodd"/></svg>
        <span>GitHub</span>
      </a>
      <a href="https://linkedin.com/in/cai0duque" target="_blank" class="flex items-center space-x-2 hover:text-indigo-400 transition">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.762 2.239 5 5 5h14c2.761 0 5-2.238 5-5v-14c0-2.761-2.239-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.784-1.75-1.749s.784-1.75 1.75-1.75c.965 0 1.749.785 1.749 1.75 0 .965-.784 1.749-1.749 1.749zm13.5 12.268h-3v-5.5c0-1.378-.026-3.152-1.918-3.152-1.918 0-2.212 1.5-2.212 3.053v5.599h-3v-11h2.879v1.507h.041c.401-.76 1.382-1.562 2.848-1.562 3.048 0 3.611 2.008 3.611 4.62v6.435z"/></svg>
        <span>LinkedIn</span>
      </a>
    </div>
  </section>

  <!-- FOOTER -->
  <footer class="py-6">
    <p class="text-center text-sm text-balance">© 2025 Caio Duque. Todos os direitos reservados.</p>
  </footer>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
    
      // --- MANTENDO LÓGICA EXISTENTE (GRADIENTE DINÂMICO E CARROSSEL) ---
      // Esta parte do seu código original foi mantida, pois é excelente e funciona bem.
      // Apenas a lógica do canvas 2D foi removida.
      const nameEl = document.getElementById('nome');
      const dynamicGradientAnimations = new Map();

      function startDynamicGradientAnimation(element) {
        let animState = dynamicGradientAnimations.get(element);
        if (!animState) {
          animState = { rafId: null, angle: 0, spinning: false };
          dynamicGradientAnimations.set(element, animState);
        }
        if (animState.spinning) return;
        animState.angle = 0;
        element.style.setProperty('--angle', '0deg');
        animState.spinning = true;
        function frame() {
          if (!animState.spinning) return;
          animState.angle = (animState.angle + 6) % 360;
          element.style.setProperty('--angle', animState.angle + 'deg');
          animState.rafId = requestAnimationFrame(frame);
        }
        frame();
        element.classList.add('radial');
      }

      function stopDynamicGradientAnimation(element) {
        let animState = dynamicGradientAnimations.get(element);
        if (animState) {
          animState.spinning = false;
          if (animState.rafId) cancelAnimationFrame(animState.rafId);
          animState.rafId = null;
          element.classList.remove('radial');
          element.style.backgroundPosition = '0% 50%';
        }
      }

      function handleDynamicGradientMouseMove(element, e) {
        const rect = element.getBoundingClientRect();
        const cx = ((e.clientX - rect.left) / rect.width) * 100;
        const cy = ((e.clientY - rect.top) / rect.height) * 100;
        element.style.setProperty('--cx', cx + '%');
        element.style.setProperty('--cy', cy + '%');
      }

      const profileCardElement = document.getElementById('profileCard');
      profileCardElement.addEventListener('mouseenter', () => startDynamicGradientAnimation(nameEl));
      profileCardElement.addEventListener('mousemove', (e) => handleDynamicGradientMouseMove(nameEl, e));
      profileCardElement.addEventListener('mouseleave', () => stopDynamicGradientAnimation(nameEl));
      
      nameEl.addEventListener('mouseenter', () => startDynamicGradientAnimation(nameEl));
      nameEl.addEventListener('mousemove', (e) => handleDynamicGradientMouseMove(nameEl, e));
      nameEl.addEventListener('mouseleave', (e) => {
        if (!profileCardElement.contains(e.relatedTarget)) {
          stopDynamicGradientAnimation(nameEl);
        }
      });
      
      window.addEventListener('scroll', () => {
        if (!nameEl.classList.contains('radial')) {
          const max = document.documentElement.scrollHeight - window.innerHeight;
          const pct = (window.scrollY / max) * 100;
          nameEl.style.backgroundPosition = `${pct}% 50%`;
        }
      });

      /* === esconder navbar ao rolar para baixo, mostrar ao rolar para cima === */
const nav = document.querySelector('header');
let lastY  = window.scrollY;
let hideTO = null;

      // ---------- underline dinâmico da navbar (temporariamente desativado para manutenção) ---------------------------------
//const navList   = document.querySelector('header nav ul');
//const underline = document.createElement('span');
//underline.className = 'nav-underline';
//navList.style.position = 'relative';
//navList.appendChild(underline);

// define posição inicial (1º item)
//moveUnderline(navList.querySelector('a'));

//navList.addEventListener('click', e=>{
//   const link = e.target.closest('a');
//   if(!link) return;
//   moveUnderline(link);
//});
// se quiser que o “raio” siga também no hover, habilite a linha abaixo
//navList.addEventListener('mouseover', e=>{
//   const link = e.target.closest('a'); if(link) moveUnderline(link);
//});

//function moveUnderline(link){
//   const rectLink = link.getBoundingClientRect();
//   const rectList = navList.getBoundingClientRect();
//   underline.style.width = rectLink.width + 'px';
//   underline.style.transform =
//        `translateX(${link.offsetLeft}px)`;
//}

window.addEventListener('scroll', () => {
  const curY = window.scrollY;

  /* tolerância de 16 px evita "tremedeira" em toques leves do mouse */
  if (curY > lastY + 16) {
    clearTimeout(hideTO);
    hideTO = setTimeout(()=> nav.classList.add('nav-hidden'), 250); // 2.5 s
    lastY = curY;
  } else if (curY < lastY - 16) {
    nav.classList.remove('nav-hidden');   // sobe → aparece instantâneo
    lastY = curY;
  }
});

      // Lógica do Carrossel (mantida integralmente)
      const carouselContainer = document.querySelector('.carousel-container');
      const carouselTrack = document.getElementById('serverCarouselTrack');
      const prevButton = document.getElementById('carouselPrev');
      const nextButton = document.getElementById('carouselNext');
      if(carouselTrack) { // Adicionando verificação para garantir que os elementos existem
        let originalServerCards = Array.from(document.querySelectorAll('#serverCarouselTrack > .server-card'));
        let serverCards = [];
        let currentIndex = 0;
        let isTransitioning = false;
        let autoScrollInterval;
        let preClones = 1;
        let postClones = 1;

        function setupInfiniteCarousel() {
            if (originalServerCards.length === 0) return;
            const preClone = originalServerCards[originalServerCards.length - 1].cloneNode(true);
            const postClone = originalServerCards[0].cloneNode(true);
            carouselTrack.innerHTML = '';
            carouselTrack.appendChild(preClone);
            originalServerCards.forEach(c => carouselTrack.appendChild(c.cloneNode(true)));
            carouselTrack.appendChild(postClone);
            serverCards = Array.from(carouselTrack.children);
            currentIndex = preClones;
            updateCarousel(true);
        }

        function updateCarousel(instant = false) {
            if (isTransitioning && !instant) return;
            if (instant) {
                carouselTrack.style.transition = 'none';
            } else {
                carouselTrack.style.transition = 'transform 0.5s ease-in-out';
                isTransitioning = true;
            }
            serverCards.forEach((card, index) => {
                card.classList.remove('is-center', 'is-left', 'is-right');
                if (index === currentIndex) card.classList.add('is-center');
                else if (index === (currentIndex - 1 + serverCards.length) % serverCards.length) card.classList.add('is-left');
                else if (index === (currentIndex + 1) % serverCards.length) card.classList.add('is-right');
            });
            /* ⇢ novo cálculo – usa retângulos reais + matriz de transform -------- */
const currentCentralCard = serverCards[currentIndex];          // mantido

const containerRect  = carouselContainer.getBoundingClientRect();
const cardRect       = currentCentralCard.getBoundingClientRect();

/* diferença entre o centro do container (já com padding)              */
/*            e o centro do cartão (já com o transform atual)          */
const delta = (containerRect.left + containerRect.width / 2) -
              (cardRect.left     + cardRect.width     / 2);

/* translateX que já existe (0 se ainda não há transform)              */
const m            = new (window.DOMMatrixReadOnly || window.WebKitCSSMatrix)(
                       getComputedStyle(carouselTrack).transform
                     );
const curTranslate = m.m41;          // componente X da matriz (px)

/* novo valor absoluto ------------------------------------------------ */
const translateXValue = curTranslate + delta;
carouselTrack.style.transform = `translateX(${translateXValue}px)`;

            carouselTrack.style.transform = `translateX(${translateXValue}px)`;
            if (!instant) {
              setTimeout(() => { isTransitioning = false; }, 500);
            }
        }

        carouselTrack.addEventListener('transitionend', e => {
            if (e.propertyName !== 'transform') return;
            isTransitioning = false;
            let needSnap = false;
            if (currentIndex >= serverCards.length - postClones) {
                currentIndex = preClones;
                needSnap = true;
            } else if (currentIndex < preClones) {
                currentIndex = serverCards.length - postClones - preClones;
                needSnap = true;
            }
            if (needSnap) {
                carouselTrack.style.transition = 'none';
                updateCarousel(true);
                void carouselTrack.offsetWidth;
                carouselTrack.style.transition = 'transform 0.5s ease-in-out';
            }
        });
        
        nextButton.addEventListener('click', () => { if (!isTransitioning) { currentIndex++; updateCarousel(); } });
        prevButton.addEventListener('click', () => { if (!isTransitioning) { currentIndex--; updateCarousel(); } });
        
        const startAutoScroll = () => { stopAutoScroll(); autoScrollInterval = setInterval(() => nextButton.click(), 6000); };
        const stopAutoScroll = () => clearInterval(autoScrollInterval);

        carouselContainer.addEventListener('mouseenter', stopAutoScroll);
        carouselContainer.addEventListener('mouseleave', startAutoScroll);
        window.addEventListener('resize', setupInfiniteCarousel);
        setupInfiniteCarousel();
        startAutoScroll();
      }


      // --- FEATURE 1: BACKGROUND 3D INTERATIVO COM THREE.JS ---
      (() => {
        const canvas = document.getElementById('bg-canvas');
        if (!canvas) return;

        // Scene setup
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer({ canvas: canvas, alpha: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));

        // Particles
        const particlesCount = 300;
        const positions = new Float32Array(particlesCount * 3);
        for (let i = 0; i < particlesCount; i++) {
          positions[i * 3 + 0] = (Math.random() - 0.5) * 10; // x
          positions[i * 3 + 1] = (Math.random() - 0.5) * 10; // y
          positions[i * 3 + 2] = (Math.random() - 0.5) * 10; // z
        }
        const particlesGeometry = new THREE.BufferGeometry();
        particlesGeometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));
        const particlesMaterial = new THREE.PointsMaterial({
          color: 0x99AAB5,
          size: 0.03,
          blending: THREE.AdditiveBlending,
          transparent: true,
          sizeAttenuation: true
        });
        const particles = new THREE.Points(particlesGeometry, particlesMaterial);
        scene.add(particles);

        // Lines
        const linesGeometry = new THREE.BufferGeometry();
        const linesMaterial = new THREE.LineBasicMaterial({
          color: 0x7289DA,
          transparent: true,
          opacity: 0.3,
          blending: THREE.AdditiveBlending
        });
        const linePositions = new Float32Array(particlesCount * particlesCount * 3);
        linesGeometry.setAttribute('position', new THREE.BufferAttribute(linePositions, 3));
        const lines = new THREE.LineSegments(linesGeometry, linesMaterial);
        scene.add(lines);

        camera.position.z = 5;

        // Mouse tracking
        const mouse = new THREE.Vector2();
        window.addEventListener('mousemove', (event) => {
          mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
          mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;
        });

        // Resize handler
        window.addEventListener('resize', () => {
          camera.aspect = window.innerWidth / window.innerHeight;
          camera.updateProjectionMatrix();
          renderer.setSize(window.innerWidth, window.innerHeight);
          renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
        });
        
        const clock = new THREE.Clock();

        function animateThree() {
          const elapsedTime = clock.getElapsedTime();
          particles.rotation.y = elapsedTime * 0.05;
          particles.rotation.x = elapsedTime * 0.05;
          
          // Animate camera based on scroll
          const scrollY = window.scrollY;
          const scrollMax = document.documentElement.scrollHeight - window.innerHeight;
          const scrollPercent = scrollY / scrollMax;
          camera.position.z = 5 - scrollPercent * 4;
          camera.position.y = -scrollPercent * 2;


          // Parallax effect
          camera.position.x += (mouse.x * 0.5 - camera.position.x) * 0.02;
          camera.position.y += (-mouse.y * 0.5 - camera.position.y) * 0.02;
          camera.lookAt(scene.position);
          
          // Update lines
          let lineVertexIndex = 0;
          const particlePositions = particles.geometry.attributes.position.array;
          const maxDistSq = 1 * 1; // Square of max distance for connection
          for (let i = 0; i < particlesCount; i++) {
            for (let j = i + 1; j < particlesCount; j++) {
                const ix = particlePositions[i * 3];
                const iy = particlePositions[i * 3 + 1];
                const iz = particlePositions[i * 3 + 2];
                const jx = particlePositions[j * 3];
                const jy = particlePositions[j * 3 + 1];
                const jz = particlePositions[j * 3 + 2];
                const dx = ix - jx;
                const dy = iy - jy;
                const dz = iz - jz;
                const distSq = dx*dx + dy*dy + dz*dz;

                if (distSq < maxDistSq) {
                    linePositions[lineVertexIndex++] = ix;
                    linePositions[lineVertexIndex++] = iy;
                    linePositions[lineVertexIndex++] = iz;
                    linePositions[lineVertexIndex++] = jx;
                    linePositions[lineVertexIndex++] = jy;
                    linePositions[lineVertexIndex++] = jz;
                }
            }
          }
          lines.geometry.attributes.position.needsUpdate = true;
          // Important: only draw the lines that were updated
          lines.geometry.setDrawRange(0, lineVertexIndex / 3);

          renderer.render(scene, camera);
          requestAnimationFrame(animateThree);
        }
        animateThree();
      })();


      // --- FEATURE 2: CONSTELAÇÃO DE HABILIDADES COM D3.JS ---
      (() => {
        const container = document.getElementById('skills-constellation-container');
        if (!container) return;

        const skillsData = {
            nodes: [
                { id: "Programação", group: "core" },
                { id: "Python", group: "language" },
                { id: "JavaScript", group: "language" },
                { id: "Java", group: "language" },
                { id: "Front-End", group: "core" },
                { id: "React", group: "framework" },
                { id: "Next.js", group: "framework" },
                { id: "Tailwind CSS", group: "framework" },
                { id: "D3.js", group: "library" },
                { id: "Three.js", group: "library" },
                { id: "Back-End", group: "core" },
                { id: "SQL", group: "database" },
                { id: "Ferramentas", group: "core" },
                { id: "Git", group: "tool" },
                { id: "Design", group: "core" },
                { id: "Figma", group: "tool" },
                { id: "UI/UX", group: "design" },
                { id: "Segurança", group: "core" },
                { id: "Cybersecurity", group: "security" },
            ],
            links: [
                { source: "Programação", target: "Python" }, { source: "Programação", target: "JavaScript" }, { source: "Programação", target: "Java" },
                { source: "Front-End", target: "JavaScript" }, { source: "Front-End", target: "React" }, { source: "Front-End", target: "Next.js" }, { source: "Front-End", target: "Tailwind CSS" },
                { source: "React", target: "JavaScript" }, { source: "Next.js", target: "React" }, { source: "D3.js", target: "JavaScript" }, { source: "Three.js", target: "JavaScript" },
                { source: "Back-End", target: "Python" }, { source: "Back-End", target: "Java" }, { source: "Back-End", target: "SQL" },
                { source: "Ferramentas", target: "Git" }, { source: "Ferramentas", target: "Figma" },
                { source: "Design", target: "Figma" }, { source: "Design", target: "UI/UX" }, { source: "Front-End", target: "UI/UX" },
                { source: "Segurança", target: "Cybersecurity" }, { source: "Programação", target: "Cybersecurity" }
            ]
        };

        const skillDescriptions = {
  "Python": `Comecei a estudar Python aos 14 anos enquanto mergulhava
  em cybersecurity. A linguagem acabou virando minha porta de entrada
  para automação e para os bots de Discord que já construí.`,
  "JavaScript": `Gosto de pensar no JavaScript como meu “canivete
  suíço”, do front-end à lógica de servidores, ele me permite
  transformar ideias em interfaces vivas.`,
  "Java": `É a linguagem que me deu disciplina de engenharia de
  software. Comecei a estudar na UniFil, dentro do curso de Ciência da
  Computação. Usei Java em projetos acadêmicos de POO e em APIs
  simples para a Federação de Automobilismo.`,
  "React": `React foi a base do LearnConnect. Curto o fluxo de dados
  previsível que ele traz para UIs complexas.`,
  "Next.js": `Server Side Rendering no LearnConnect veio com Next.js,
  garantindo SEO e páginas super rápidas.`,
  "Tailwind CSS": `Meu framework favorito para estilização. Posso
  prototipar interfaces em minutos sem sair do HTML.`,
  "D3.js": `Ferramenta essencial para criar as visualizações interativas
  de dados de corridas da FPrA, inclusive esta constelação.`,
  "Three.js": `Exploro 3D na web por hobby, foi com Three.js que criei
  o background de partículas deste portfólio.`,
  "SQL": `Nada como um bom SELECT para descobrir padrões nos resultados
  das pistas. Uso SQL todos os dias como data-analyst.`,
  "Git": `Tudo o que eu faço no mundo dev é feito com versionamento,
  sempre busco manter um bom padrão de comunicação e informação nos
  commits`,
  "Figma": `Faço do Figma meu caderno de rascunhos digitais antes de
  qualquer linha de código. Literalmente a minha paixão mais forte no
  mundo dev é a arte do design gráfico. Desde pequeno, sempre amei criar.`,
  "UI/UX": `Acredito que código bonito é inútil se a experiência
  desaponta. Por isso estudo fluxos, acessibilidade e micro-interações.`,
  "Cybersecurity": `CTFs, labs e muita curiosidade: segurança é meu
  combustível para aprender como as coisas realmente funcionam.`,
  /* Os nós-“core” podem usar descrições genéricas curtas */
  "Programação":  "O centro de tudo que faço.",
  "Front-End":    "Onde criatividade vira interface.",
  "Back-End":     "A engrenagem por trás da mágica.",
  "Ferramentas":  "Utilitários que aceleram meu dia a dia.",
  "Design":       "Transformando ideias em valor visual.",
  "Segurança":    "Camada crítica para qualquer projeto."
};


        const skillIcons = {
  "Python":        "assets/images/python.png",
  "JavaScript":    "assets/images/javascript.png",
  "Java":          "assets/images/java.png",
  "React":         "assets/images/react.png",
  "Next.js":       "assets/images/nextjs.png",
  "Tailwind CSS":  "assets/images/tailwindcss.png",
  "D3.js":         "assets/images/d3.png",          //  ←   NOVAS!
  "Three.js":      "assets/images/threejs.png",
  "SQL":           "assets/images/sql.png",
  "Git":           "assets/images/git.png",
  "Figma":         "assets/images/figma.png",
  "UI/UX":         "assets/images/uiux_design.png",
  "Cybersecurity": "assets/images/cybersecurity.png",
  // os “core” (Programação, etc.) podem ficar sem ícone
};


        const width = container.clientWidth;
        const height = container.clientHeight;
        // ——— ajuste automático para mobile ———
        const isMobile = window.innerWidth <= 768;   // mesmo corte do seu CSS
        const SCALE    = isMobile ? 0.65 : 1;       // 65 % do tamanho no mobile

        // ——— parâmetros de layout ———
        const linkDist       = isMobile ? 70  : 100;   // ↓ encurta no mobile
        const chargeStrength = isMobile ? -120 : -200; // ↓ repulsão menor

        /* ───────── Elemento único de cartão ───────── */
        const infoCard = document.createElement("div");
        infoCard.className = "skill-info-card";
        document.body.appendChild(infoCard);

        const svg = d3.select(container).append("svg")
            .attr("viewBox", [-width / 2, -height / 2, width, height]);

        const simulation = d3.forceSimulation(skillsData.nodes)
  .force("link",
         d3.forceLink(skillsData.links)
            .id(d => d.id)
            .distance(linkDist)              // ← usa linkDist
  )
  .force("charge",
         d3.forceManyBody()
            .strength(chargeStrength)        // ← usa chargeStrength
  )
  .force("center", d3.forceCenter())
  // evita sobreposição sem jogar para a borda
  .force("collide",
         d3.forceCollide()
            .radius(d => (d.group === "core" ? 26 : 20) * SCALE + 6)
            .iterations(2)
  );
       if (isMobile) simulation.alpha(0.6);

        const colorScale = d3.scaleOrdinal(d3.schemeCategory10)
            .domain(["core", "language", "framework", "library", "database", "tool", "design", "security"]);

        const link = svg.append("g")
            .attr("class", "links")
            .selectAll("line")
            .data(skillsData.links)
            .enter().append("line")
            .attr("class", "skill-link");

        const node = svg.append("g")
            .attr("class", "nodes")
            .selectAll("g")
            .data(skillsData.nodes)
            .enter().append("g")
            .attr("class", "skill-node");

       node.each(function (d) {
  const g = d3.select(this);

  /* ─── NÓS “CORE” → ESTRELA ─── */
  if (d.group === "core") {
    const starSize = 52 * SCALE;          // ↓ 52 px desktop → 34 px mobile
    g.classed("core-star", true)
     .append("image")
     .attr("href", "assets/images/star.png")
     .attr("width",  starSize)
     .attr("height", starSize)
     .attr("x", -starSize / 2)
     .attr("y", -starSize / 2);
  }

  /* ─── Demais nós: círculo de vidro + ícone ─── */
  else {
    const r        = 20 * SCALE;          // ↓ 20 px → 13 px
    const imgSize  = 32 * SCALE;          // ↓ 32 px → 21 px

    g.append("circle")
     .attr("class", "glass")
     .attr("r", r);

    if (skillIcons[d.id]) {
      g.append("image")
       .attr("href",   skillIcons[d.id])
       .attr("width",  imgSize)
       .attr("height", imgSize)
       .attr("x", -imgSize / 2)
       .attr("y", -imgSize / 2);
    }
  }
});


        node.append("text")
       .text(d => d.id)
       .attr("y", d => (d.group === "core" ? 34 * SCALE : 28 * SCALE))
       .attr("font-size", isMobile ? 9 : 11);



        node.call(d3.drag()
            .on("start", dragstarted)
            .on("drag", dragged)
            .on("end", dragended));

        // wrapper interno para aplicar transform via zoom
//const gZoom = svg.append("g");
//gZoom.append(() => link.node().parentNode.removeChild(link.node()));
//gZoom.append(() => node.node().parentNode.removeChild(node.node()));
//gZoom.append(() => link.node());
//gZoom.append(() => node.node());

// Zoom + pan (arrastar) + pinch
//svg.call(
  //d3.zoom()
    // .scaleExtent([.5, 3])
     //.on("zoom", e => gZoom.attr("transform", e.transform))
//);

            
        // Hover/Focus functionality
        const linkedByIndex = {};
        skillsData.links.forEach(d => {
            linkedByIndex[`${d.source.id},${d.target.id}`] = 1;
        });

        function isConnected(a, b) {
            return linkedByIndex[`${a.id},${b.id}`] || linkedByIndex[`${b.id},${a.id}`] || a.id === b.id;
        }

        function showCard(d, evt){
  const desc = skillDescriptions[d.id] || "Em construção…";
  infoCard.innerHTML = `<h4>${d.id}</h4><p>${desc}</p>`;

  if (isMobile){
    infoCard.classList.add("mobile");
    // centralizado – posição ajustada só pela classe
  }else{
    infoCard.classList.remove("mobile");
    moveCard(evt);                 // posiciona perto do cursor
  }

  requestAnimationFrame(()=>infoCard.classList.add("visible"));
}



function moveCard(evt){
  // margem mínima para não “vazar” da tela
  const pad = 12;
  let x = evt.clientX + 18;        // 18 px à direita do cursor
  let y = evt.clientY + 18;
  // corrige se bater na borda direita / baixo
  if (x + infoCard.offsetWidth  > window.innerWidth  - pad) x = evt.clientX - infoCard.offsetWidth - 18;
  if (y + infoCard.offsetHeight > window.innerHeight - pad) y = evt.clientY - infoCard.offsetHeight - 18;
  infoCard.style.left = x + "px";
  infoCard.style.top  = y + "px";
}

function hideCard(){
  infoCard.classList.remove("visible","mobile");
}

node
  .on("mouseenter", (evt,d)=> showCard(d,evt))
  .on("mousemove",  (evt)=>{ if (!isMobile) moveCard(evt); })
  .on("mouseleave", hideCard)
  // suporto toque: um tap mostra, segundo tap fora some
  .on("touchstart", (evt,d)=>{
     evt.preventDefault();
     showCard(d, evt.touches[0]);
     window.addEventListener("touchend", hideCard, { once:true });
  });



        simulation.on("tick", () => {
            link
                .attr("x1", d => d.source.x)
                .attr("y1", d => d.source.y)
                .attr("x2", d => d.target.x)
                .attr("y2", d => d.target.y);
            const margin = 40 * SCALE;                       // distância mínima da borda
            node
                .each(d => {                           // mantém dentro da viewBox
                  d.x = Math.max(-width/2  + margin, Math.min(width/2  - margin, d.x));
                  d.y = Math.max(-height/2 + margin, Math.min(height/2 - margin, d.y));
          })
                .attr("transform", d => `translate(${d.x},${d.y})`);

        });

        function dragstarted(event, d) {
            if (!event.active) simulation.alphaTarget(0.3).restart();
            d.fx = d.x;
            d.fy = d.y;
        }

        function dragged(event, d) {
            d.fx = event.x;
            d.fy = event.y;
        }

        function dragended(event, d) {
            if (!event.active) simulation.alphaTarget(0);
            d.fx = null;
            d.fy = null;
        }

        window.addEventListener("resize", () => {
  const w      = container.clientWidth;
  const h      = container.clientHeight;
  svg.attr("viewBox", [-w/2, -h/2, w, h]);
  simulation.force("center").x(0).y(0);
  simulation.alpha(0.2).restart();       // reposiciona suavemente
        });

      })();
    });
  </script>

</body>
</html>

















